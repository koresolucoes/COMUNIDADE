
<div class="max-w-4xl mx-auto">
  <header class="mb-12">
    <div class="text-sm text-gray-400 mb-3 flex items-center gap-2">
      <a routerLink="/learning" class="hover:text-blue-accent hover:underline">Trilhas de Aprendizagem</a>
      <span class="material-icons-outlined text-base">chevron_right</span>
      <a routerLink="/learning/fundamentos-design-visual-devs" class="hover:text-blue-accent hover:underline">Fundamentos do Design Visual para Devs</a>
    </div>
    <h1 class="text-4xl md:text-5xl font-bold text-white tracking-tight">A Mágica do Espaçamento: Layouts com Grid e Flexbox</h1>
    <p class="mt-4 text-lg text-gray-400">Entenda os conceitos básicos por trás dos sistemas de layout mais poderosos do CSS através da prática.</p>
  </header>

  <article class="prose-container space-y-16">
    
    <!-- Intro -->
    <div class="p-6 bg-gray-900 border border-gray-800 rounded-lg">
      <h2 class="text-2xl font-semibold text-white !mt-0">O Desafio do Layout</h2>
      <p class="text-gray-300">
        Imagine arrumar móveis em uma sala. Você não joga tudo no meio; você alinha o sofá com a TV, a mesa com a janela. 
        Na web, <strong>Flexbox</strong> e <strong>CSS Grid</strong> são as ferramentas que usamos para organizar esses "móveis" (elementos HTML). 
        Eles substituíram os antigos "hacks" (como floats e tabelas) por sistemas lógicos e robustos.
      </p>
    </div>

    <!-- Seção 1: Flexbox -->
    <section>
      <h2 class="text-2xl font-semibold text-white mb-4">1. Flexbox: O Especialista em Uma Dimensão</h2>
      <p class="text-gray-300 mb-6">
        Pense no Flexbox como uma fila de pessoas. Você pode organizá-las em uma linha (horizontal) ou coluna (vertical). 
        O poder do Flexbox está em distribuir o espaço entre os itens e alinhá-los ao longo desse eixo.
      </p>

      <!-- Playground Flexbox -->
      <div class="p-6 bg-gray-900 border border-gray-800 rounded-xl">
        <div class="flex items-center justify-between mb-6">
           <h3 class="text-lg font-bold text-white flex items-center gap-2">
            <span class="material-icons-outlined text-blue-accent">linear_scale</span> Laboratório Flexbox
          </h3>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <!-- Controls -->
          <div class="space-y-4">
            
            <div class="space-y-2">
              <label class="text-xs font-bold text-gray-400 uppercase">Flex Direction</label>
              <div class="flex gap-2">
                <button (click)="flexDirection.set('row')" [class.bg-blue-600]="flexDirection() === 'row'" class="flex-1 py-2 px-3 rounded border border-gray-700 text-xs font-mono transition-colors text-gray-300 bg-gray-800 hover:bg-gray-700">row</button>
                <button (click)="flexDirection.set('column')" [class.bg-blue-600]="flexDirection() === 'column'" class="flex-1 py-2 px-3 rounded border border-gray-700 text-xs font-mono transition-colors text-gray-300 bg-gray-800 hover:bg-gray-700">column</button>
              </div>
            </div>

            <div class="space-y-2">
              <label class="text-xs font-bold text-gray-400 uppercase">Justify Content (Eixo Principal)</label>
              <select [ngModel]="justifyContent()" (ngModelChange)="justifyContent.set($event)" class="w-full bg-gray-800 border-gray-700 text-white rounded p-2 text-sm">
                <option value="flex-start">flex-start</option>
                <option value="center">center</option>
                <option value="flex-end">flex-end</option>
                <option value="space-between">space-between</option>
                <option value="space-around">space-around</option>
              </select>
            </div>

            <div class="space-y-2">
              <label class="text-xs font-bold text-gray-400 uppercase">Align Items (Eixo Cruzado)</label>
              <select [ngModel]="alignItems()" (ngModelChange)="alignItems.set($event)" class="w-full bg-gray-800 border-gray-700 text-white rounded p-2 text-sm">
                <option value="stretch">stretch</option>
                <option value="flex-start">flex-start</option>
                <option value="center">center</option>
                <option value="flex-end">flex-end</option>
              </select>
            </div>
          </div>

          <!-- Preview -->
          <div class="md:col-span-2 bg-gray-800 border border-gray-700 rounded-lg h-64 relative overflow-hidden">
            <div class="absolute top-2 left-2 text-xs font-mono text-gray-500 pointer-events-none">.container {{ '{' }} display: flex; {{ '}' }}</div>
            
            <div class="w-full h-full flex p-4 gap-2 transition-all duration-500"
                 [style.flex-direction]="flexDirection()"
                 [style.justify-content]="justifyContent()"
                 [style.align-items]="alignItems()">
              
              <div class="w-16 min-h-[64px] bg-blue-500/80 border-2 border-blue-400 rounded flex items-center justify-center text-white font-bold shadow-lg">1</div>
              <div class="w-16 min-h-[64px] bg-purple-500/80 border-2 border-purple-400 rounded flex items-center justify-center text-white font-bold shadow-lg">2</div>
              <div class="w-16 min-h-[64px] bg-pink-500/80 border-2 border-pink-400 rounded flex items-center justify-center text-white font-bold shadow-lg">3</div>

            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Seção 2: CSS Grid -->
    <section>
      <h2 class="text-2xl font-semibold text-white mb-4">2. CSS Grid: O Mestre da Grade Bidimensional</h2>
      <p class="text-gray-300 mb-6">
        Se o Flexbox é uma linha, o Grid é um tabuleiro de xadrez. Ele controla colunas e linhas simultaneamente. 
        É perfeito para o layout macro da página (Header, Sidebar, Conteúdo).
      </p>

      <!-- Playground Grid -->
      <div class="p-6 bg-gray-900 border border-gray-800 rounded-xl">
        <div class="flex items-center justify-between mb-6">
           <h3 class="text-lg font-bold text-white flex items-center gap-2">
            <span class="material-icons-outlined text-green-400">grid_view</span> Laboratório Grid
          </h3>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <!-- Controls -->
          <div class="space-y-6">
            <div class="space-y-2">
              <label class="text-xs font-bold text-gray-400 uppercase">Grid Template Columns</label>
              <div class="flex flex-col gap-2">
                <button (click)="gridColumns.set('1fr 1fr 1fr')" [class.bg-green-600]="gridColumns() === '1fr 1fr 1fr'" class="w-full py-2 px-3 rounded border border-gray-700 text-xs font-mono text-left transition-colors text-gray-300 bg-gray-800 hover:bg-gray-700">
                  1fr 1fr 1fr
                  <span class="block text-[10px] text-gray-500 font-sans mt-1">Três colunas iguais</span>
                </button>
                <button (click)="gridColumns.set('1fr 2fr')" [class.bg-green-600]="gridColumns() === '1fr 2fr'" class="w-full py-2 px-3 rounded border border-gray-700 text-xs font-mono text-left transition-colors text-gray-300 bg-gray-800 hover:bg-gray-700">
                  1fr 2fr
                  <span class="block text-[10px] text-gray-500 font-sans mt-1">Sidebar (1/3) + Content (2/3)</span>
                </button>
                <button (click)="gridColumns.set('200px 1fr')" [class.bg-green-600]="gridColumns() === '200px 1fr'" class="w-full py-2 px-3 rounded border border-gray-700 text-xs font-mono text-left transition-colors text-gray-300 bg-gray-800 hover:bg-gray-700">
                  200px 1fr
                  <span class="block text-[10px] text-gray-500 font-sans mt-1">Sidebar fixa + Content fluido</span>
                </button>
              </div>
            </div>

            <div class="space-y-2">
              <label class="text-xs font-bold text-gray-400 uppercase">Gap (Espaçamento): {{ gridGap() }}px</label>
              <input type="range" min="0" max="32" [ngModel]="gridGap()" (ngModelChange)="gridGap.set(+$event)" class="w-full accent-green-500">
            </div>
          </div>

          <!-- Preview -->
          <div class="md:col-span-2 bg-gray-800 border border-gray-700 rounded-lg h-64 p-4 relative overflow-hidden">
            <div class="w-full h-full grid transition-all duration-500"
                 [style.grid-template-columns]="gridColumns()"
                 [style.gap.px]="gridGap()"
                 style="grid-template-rows: 1fr 1fr;">
              
              <div class="bg-gray-700/50 border border-gray-600 rounded flex items-center justify-center text-gray-400 text-sm">1</div>
              <div class="bg-gray-700/50 border border-gray-600 rounded flex items-center justify-center text-gray-400 text-sm">2</div>
              <div class="bg-gray-700/50 border border-gray-600 rounded flex items-center justify-center text-gray-400 text-sm">3</div>
              <div class="bg-gray-700/50 border border-gray-600 rounded flex items-center justify-center text-gray-400 text-sm">4</div>
              <div class="bg-gray-700/50 border border-gray-600 rounded flex items-center justify-center text-gray-400 text-sm">5</div>
              <div class="bg-gray-700/50 border border-gray-600 rounded flex items-center justify-center text-gray-400 text-sm">6</div>

            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2 class="text-2xl font-semibold text-white mb-4">Grid ou Flexbox?</h2>
      <table class="w-full text-left border-collapse border border-gray-800 text-sm">
        <thead class="bg-gray-900">
          <tr>
            <th class="p-3 border-b border-gray-700 font-bold text-gray-300">Use Flexbox para...</th>
            <th class="p-3 border-b border-gray-700 font-bold text-gray-300">Use Grid para...</th>
          </tr>
        </thead>
        <tbody class="text-gray-400">
          <tr class="border-b border-gray-800">
            <td class="p-3 align-top">Alinhamento 1D (linha ou coluna).</td>
            <td class="p-3 align-top">Layouts 2D (linhas e colunas ao mesmo tempo).</td>
          </tr>
          <tr class="border-b border-gray-800">
            <td class="p-3 align-top">Pequenos componentes (menus, botões).</td>
            <td class="p-3 align-top">Estrutura macro da página (layout principal).</td>
          </tr>
          <tr>
            <td class="p-3 align-top">Alinhamento de conteúdo (Content-First).</td>
            <td class="p-3 align-top">Definição de layout rígido (Layout-First).</td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- Desafio Prático -->
    <section class="mt-16 border-t border-gray-800 pt-10">
      <div class="bg-gradient-to-br from-indigo-900/20 to-gray-900 border border-indigo-500/30 rounded-xl p-8">
        <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-8">
          <div>
            <span class="text-xs font-bold text-indigo-400 uppercase tracking-wider">Desafio Prático</span>
            <h2 class="text-2xl font-bold text-white mt-1">Conserte a Navbar</h2>
            <p class="text-gray-400 text-sm mt-2">
              O logo e os links estão grudados e desalinhados. Use Flexbox para separar o logo (esquerda) dos links (direita) e centralizá-los verticalmente.
            </p>
          </div>
          
          @if(isNavFixed()) {
            <div class="px-4 py-2 bg-green-500/20 border border-green-500/50 text-green-400 rounded-full text-sm font-bold flex items-center gap-2 animate-fade-in">
              <span class="material-icons-outlined">check_circle</span> Resolvido!
            </div>
          } @else {
            <div class="px-4 py-2 bg-gray-800 border border-gray-700 text-gray-400 rounded-full text-sm">
              Aguardando correção...
            </div>
          }
        </div>

        <!-- Code Editor Simulation -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
          <div class="space-y-4">
            <div class="p-4 bg-gray-800 rounded-lg border border-gray-700">
              <p class="text-xs font-mono text-gray-500 mb-3">.navbar-container {{ '{' }}</p>
              
              <div class="space-y-3 pl-4">
                <div>
                  <label class="block text-xs text-indigo-300 mb-1">display: flex;</label>
                </div>
                
                <div>
                  <label class="block text-xs text-indigo-300 mb-1">justify-content:</label>
                  <select [ngModel]="navJustify()" (ngModelChange)="navJustify.set($event)" class="w-full bg-gray-900 border border-gray-600 text-white rounded p-1 text-xs font-mono">
                    <option value="flex-start">flex-start</option>
                    <option value="center">center</option>
                    <option value="flex-end">flex-end</option>
                    <option value="space-between">space-between</option>
                  </select>
                </div>

                <div>
                  <label class="block text-xs text-indigo-300 mb-1">align-items:</label>
                  <select [ngModel]="navAlign()" (ngModelChange)="navAlign.set($event)" class="w-full bg-gray-900 border border-gray-600 text-white rounded p-1 text-xs font-mono">
                    <option value="flex-start">flex-start</option>
                    <option value="center">center</option>
                    <option value="stretch">stretch</option>
                  </select>
                </div>
              </div>

              <p class="text-xs font-mono text-gray-500 mt-3">{{ '}' }}</p>
            </div>

            <button (click)="resetChallenge()" *ngIf="isNavFixed()" class="w-full py-2 text-sm text-gray-400 hover:text-white transition-colors">
              Resetar Desafio
            </button>
          </div>

          <!-- Visual Preview -->
          <div class="lg:col-span-2 bg-black/40 rounded-xl p-8 border border-gray-800 flex flex-col justify-center relative overflow-hidden">
            <div class="w-full bg-gray-800 border-b border-gray-700 h-16 px-4 flex shadow-xl transition-all duration-500"
                 [style.justify-content]="navJustify()"
                 [style.align-items]="navAlign()">
              
              <!-- Logo -->
              <div class="flex items-center gap-2 text-white font-bold text-lg tracking-tight">
                <div class="w-8 h-8 bg-indigo-500 rounded flex items-center justify-center shadow-lg">K</div>
                <span>Kore</span>
              </div>

              <!-- Links -->
              <div class="flex gap-4 text-sm text-gray-400">
                <div class="w-16 h-2 bg-gray-600 rounded"></div>
                <div class="w-20 h-2 bg-gray-600 rounded"></div>
                <div class="w-12 h-2 bg-gray-600 rounded"></div>
              </div>

            </div>
            
            <!-- Guidelines (Visual Aid) -->
            <div class="absolute inset-0 pointer-events-none flex justify-center items-center" *ngIf="!isNavFixed()">
                <div class="text-gray-600/30 text-9xl font-bold select-none">?</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <div class="pt-8 text-center">
       <a routerLink="/learning/article/tipografia-funcional" class="inline-flex items-center gap-2 px-6 py-3 bg-gray-700 text-white rounded-md font-semibold hover:bg-gray-600 transition-colors">
        <span class="material-icons-outlined">arrow_back</span>
        Anterior: Tipografia Funcional
      </a>
       <a routerLink="/learning/article/profundidade-com-sombras" class="inline-flex items-center gap-2 px-6 py-3 bg-blue-accent text-white rounded-md font-semibold hover:bg-blue-accent/90 transition-colors ml-4">
        Próximo: Profundidade com Sombras
        <span class="material-icons-outlined">arrow_forward</span>
      </a>
    </div>
  </article>
</div>
