<div class="fixed inset-0 z-50 bg-gray-950/80 backdrop-blur-sm flex justify-center items-center" (click)="onBackdropClick($event)">
  <div class="w-full max-w-2xl bg-gray-900 border border-gray-700 rounded-lg shadow-2xl flex overflow-hidden">
    <!-- Left Panel: Method List -->
    <div class="w-2/5 border-r border-gray-700 flex flex-col">
      <div class="p-3 border-b border-gray-700">
        <h3 class="font-semibold text-white">Adicionar Método</h3>
      </div>
      <div class="flex-1 overflow-y-auto">
        @if(groupedMethods().length === 0) {
          <p class="text-center text-gray-500 p-4 text-sm">Nenhum método aplicável para o tipo de dado atual.</p>
        } @else {
          @for(group of groupedMethods(); track group[0]) {
            <div class="p-2">
              <h4 class="text-xs font-semibold text-gray-500 px-2 pt-1 pb-1 uppercase tracking-wider">{{ group[0] }}</h4>
              <ul>
                @for(method of group[1]; track method.name) {
                  <li>
                    <button 
                      (mouseenter)="activeMethod.set(method)"
                      (click)="selectMethod(method)"
                      class="w-full text-left px-2 py-1.5 rounded-md text-sm hover:bg-gray-800 transition-colors"
                      [class.bg-blue-accent/20]="activeMethod() === method"
                      [class.text-white]="activeMethod() === method">
                      {{ method.name }}
                    </button>
                  </li>
                }
              </ul>
            </div>
          }
        }
      </div>
    </div>

    <!-- Right Panel: Method Details -->
    <div class="w-3/5 bg-gray-800/50 p-4">
      @if(activeMethod(); as method) {
        <div>
          <h4 class="font-mono text-lg text-cyan-300">{{ method.name }}</h4>
          <p class="text-sm text-gray-400 mt-2">{{ method.description }}</p>
          
          <h5 class="text-xs font-semibold text-gray-500 mt-6 mb-2 uppercase tracking-wider">Exemplo</h5>
          <pre class="bg-gray-900 p-3 rounded-md text-xs text-white overflow-x-auto"><code [textContent]="method.example"></code></pre>
        </div>
      } @else {
        <div class="flex items-center justify-center h-full">
          <p class="text-gray-500 text-sm">Passe o mouse sobre um método para ver os detalhes.</p>
        </div>
      }
    </div>
  </div>
</div>
